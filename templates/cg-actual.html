{% extends "base.html" %}

{% block base_body %}

<div class="container">
  <form id="compute_cg_act">
    <div class="col-xs-4">
      <input type="text" placeholder="Coinsecure API Key" 
            class="form-control"
            id="apikey" name="apikey" />
    </div>
    <div class="col-xs-2">
      <input type="text" placeholder="Date From" class="form-control"
	     id="from" name="from" />
    </div>

    <div class="col-xs-2">
      <input type="text" placeholder="Date to" class="form-control"
	     id="to" name="to" />
    </div>

    <div class="col-xs-2">
      <button type="submit" class="btn btn-cs-prim">
	Compute Gains
      </button>
    </div>
    </form>
</div>

{% if cgs %}

<hr/>
<div class="container">
  <h4 class="center-250">Sell/Buy FIFO Settlement Log</h4><p/><p/>

  <table id="cgtxns" class="table table-striped table-bordered dataTable" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>Sell Txn ID</th>
		<th>Sell Date</th>
                <th>Buy Txn ID</th>
                <th>Buy Date</th>
                <th>Open (BTC)</th>
                <th>Vol (BTC)</th>
                <th>Close (BTC)</th>
                <th>Gain (INR)</th>
                <th>STG</th>
            </tr>
        </thead>

        <tbody>
        {% for cgtxn in cgs['txn_log'] %}
            <tr>
                <td>{{ cgtxn.sell_id }}</td>
		<td>{{ cgmod.disp_time_from_ts_ms(cgtxn.sell_time) }}</td>
                <td>{{ cgtxn.buy_id }}</td>
                <td>{{ cgmod.disp_time_from_ts_ms(cgtxn.buy_time) }}</td>
                <td>{{ cgtxn.open_vol / 100000000.0}}</td>
                <td>{{ cgtxn.vol / 100000000.0}}</td>
                <td>{{ cgtxn.close_vol / 100000000.0}}</td>
                <td>{{ cgtxn.gain }}</td>
                <td>{{ cgtxn.stg }} </td>
            </tr>
        {% endfor %}
  </table>
</div>
{% endif %}

{% endblock %}
